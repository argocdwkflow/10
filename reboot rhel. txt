Voici une analyse complÃ¨te et structurÃ©e des causes racines (Root Cause Analysis â€“ RCA) dâ€™un reboot dâ€™un serveur Linux RHEL 7, comme on lâ€™attend en environnement production / N3.
ğŸ” MÃ©thodologie RCA recommandÃ©e (RHEL 7)
1ï¸âƒ£ Identifier si le reboot est volontaire ou subi
Câ€™est lâ€™Ã©tape la plus critique.
Type
Indication
ğŸ”„ Reboot volontaire
reboot, shutdown, patching
âš ï¸ Crash OS
kernel panic, OOM, soft lockup
ğŸ”Œ Reboot matÃ©riel
power loss, iDRAC, watchdog
ğŸ” Action sÃ©curitÃ©
hardening, agent EDR
2ï¸âƒ£ Sources de logs clÃ©s Ã  analyser (dans lâ€™ordre)
ğŸ”¹ Historique des reboots
Copy code
Bash
last -x | head -20
RÃ©sultats typiques :
reboot system boot
crash
shutdown
ğŸ”¹ Logs systÃ¨me
Copy code
Bash
grep -iE "reboot|panic|oom|watchdog|reset" /var/log/messages
Copy code
Bash
journalctl --list-boots
journalctl -b -1
3ï¸âƒ£ Causes racines les plus frÃ©quentes sur RHEL 7
ğŸŸ¥ A. Kernel Panic (cause critique)
SymptÃ´mes :
reboot brutal
message kernel panic ou Oops
Causes :
bug kernel
module tiers (Veritas, Oracle ASM, drivers SAN)
corruption mÃ©moire
VÃ©rification :
Copy code
Bash
journalctl -k -b -1
ğŸ“Œ RCA type :
Kernel panic causÃ© par le module vxfs aprÃ¨s une opÃ©ration I/O concurrente.
ğŸŸ¥ B. OOM Killer (Out Of Memory)
SymptÃ´mes :
charge Ã©levÃ©e
base/app stoppÃ©e
parfois reboot indirect
Logs :
Copy code
Bash
grep -i oom /var/log/messages
Cause racine :
RAM saturÃ©e
swap insuffisant
memory leak applicatif
ğŸŸ¥ C. Watchdog matÃ©riel / logiciel
TrÃ¨s frÃ©quent sur serveurs Dell / HP / IBM.
Logs :
Copy code
Bash
grep -i watchdog /var/log/messages
Causes :
CPU soft lockup
kernel bloquÃ© > timeout watchdog
ğŸ“Œ Exemple RCA :
Reboot dÃ©clenchÃ© par watchdog suite Ã  un soft lockup CPU causÃ© par une contention I/O.
ğŸŸ¥ D. ProblÃ¨me matÃ©riel / hyperviseur
Indications :
Aucun log OS avant reboot
reboot â€œpropreâ€ mais inexpliquÃ©
Causes :
panne alimentation
crash hyperviseur (VMware / IBM Cloud)
reset via iDRAC / IMM
ğŸ‘‰ Ã€ vÃ©rifier :
logs hyperviseur
logs iDRAC / iLO
ğŸŸ¥ E. Action humaine / automatisation
TrÃ¨s courant en environnement Satellite / Ansible.
Indices :
Copy code
Bash
last reboot
ausearch -x reboot
Causes possibles :
patching automatique
cron mal configurÃ©
job Ansible / Satellite
ğŸŸ¥ F. SÃ©curitÃ© / agents
Agents type :
antivirus
EDR
monitoring avec injection kernel
SymptÃ´me :
reboot post-update agent
kernel tainted
Copy code
Bash
dmesg | grep -i taint
4ï¸âƒ£ Cas spÃ©cifique RHEL 7 (Ã  connaÃ®tre)
Ã‰lÃ©ment
Risque
Kernel ancien
bugs connus
Modules tiers
instabilitÃ©
cgroups v1
OOM plus brutal
systemd ancien
logs incomplets
5ï¸âƒ£ ModÃ¨le de Conclusion RCA professionnelle
Root Cause : Reboot non planifiÃ© du serveur causÃ© par un kernel panic dÃ©clenchÃ© par un module tiers Veritas lors dâ€™une opÃ©ration I/O intensive.
Impact : Interruption applicative de 4 minutes.
Corrective Action : Mise Ã  jour du module, ajustement watchdog, upgrade kernel validÃ©.
Preventive Action : Monitoring kernel panic, validation modules tiers aprÃ¨s patching.
6ï¸âƒ£ Si tu veux, je peux :
âœ… Tâ€™aider Ã  analyser un extrait rÃ©el de /var/log/messages
âœ… RÃ©diger une RCA prÃªte pour incident manager
âœ… Comparer RHEL7 vs RHEL8/9 sur les causes de reboot
âœ… Fournir un script dâ€™audit reboot automatique
Dis-moi ğŸ‘

Voici une liste avancÃ©e de commandes de troubleshooting Ã  lancer aprÃ¨s un reboot RHEL 7, utilisÃ©es en diagnostic N3 / RCA production.
Je les ai classÃ©es par objectif, avec interprÃ©tation attendue.
ğŸ§  1ï¸âƒ£ Comprendre POURQUOI le kernel sâ€™est arrÃªtÃ©
ğŸ”¹ Derniers messages kernel AVANT reboot
Copy code
Bash
journalctl -k -b -1 --no-pager | tail -200
â¡ï¸ Cherche :
kernel panic
BUG: soft lockup
watchdog
oom-killer
ğŸ”¹ Kernel buffer brut
Copy code
Bash
dmesg -T | tail -200
ğŸ”¹ Ã‰tat kernel (tainted = module tiers)
Copy code
Bash
cat /proc/sys/kernel/tainted
0 â†’ kernel sain
>0 â†’ module propriÃ©taire / instabilitÃ© possible
ğŸ§® 2ï¸âƒ£ MÃ©moire / OOM / Pression RAM
ğŸ”¹ Historique OOM
Copy code
Bash
grep -i "oom" /var/log/messages
ğŸ”¹ Dernier Ã©tat mÃ©moire
Copy code
Bash
free -m
vmstat 1 5
ğŸ”¹ ParamÃ¨tres mÃ©moire critiques
Copy code
Bash
sysctl vm.overcommit_memory
sysctl vm.swappiness
ğŸ“Œ Indice RCA : OOM + swap faible â†’ reboot indirect par watchdog ou crash applicatif critique.
âš™ï¸ 3ï¸âƒ£ CPU / soft lockup / watchdog
ğŸ”¹ Soft lockup CPU
Copy code
Bash
grep -i "soft lockup" /var/log/messages
ğŸ”¹ Watchdog
Copy code
Bash
grep -i watchdog /var/log/messages
ğŸ”¹ Charge historique
Copy code
Bash
uptime
sar -q 1 5
ğŸ’¾ 4ï¸âƒ£ Disques / I/O / Filesystems
ğŸ”¹ Erreurs filesystem
Copy code
Bash
grep -iE "xfs|ext4|I/O error" /var/log/messages
ğŸ”¹ Latence disque
Copy code
Bash
iostat -xz 1 5
ğŸ”¹ Filesystem en erreur (forÃ§ant reboot)
Copy code
Bash
mount | grep ro
ğŸ”Œ 5ï¸âƒ£ RÃ©seau / drivers / bonding
ğŸ”¹ Erreurs drivers
Copy code
Bash
dmesg | grep -iE "eth|bond|net|link down"
ğŸ”¹ Ã‰tat bonding
Copy code
Bash
cat /proc/net/bonding/bond0
ğŸ“Œ Cas rÃ©el : driver NIC crash â†’ kernel panic.
ğŸ§© 6ï¸âƒ£ Modules kernel tiers (TRÃˆS IMPORTANT)
ğŸ”¹ Modules chargÃ©s
Copy code
Bash
lsmod | head -20
ğŸ”¹ Modules suspects
Copy code
Bash
lsmod | egrep "vx|oracle|asm|kmod|falcon|edr"
ğŸ”¹ Version kernel
Copy code
Bash
uname -a
rpm -q kernel
ğŸ“Œ RCA frÃ©quent RHEL7 : kernel patchÃ© + module non compatible.
ğŸ” 7ï¸âƒ£ SÃ©curitÃ© / actions humaines / automation
ğŸ”¹ Qui a rebootÃ© ?
Copy code
Bash
last reboot
last shutdown
ğŸ”¹ Audit
Copy code
Bash
ausearch -i -m system_boot,system_shutdown
ğŸ”¹ Cron / automatisation
Copy code
Bash
crontab -l
ls /etc/cron.*
ğŸ–¥ï¸ 8ï¸âƒ£ MatÃ©riel / hyperviseur (si VM)
ğŸ”¹ Indice power loss
Copy code
Bash
journalctl -b -1 | grep -i power
â¡ï¸ Si aucun log OS avant reboot â†’
ğŸ‘‰ cause externe (VMware, IBM Cloud, iDRAC)
ğŸ“¦ 9ï¸âƒ£ Services critiques avant reboot
Copy code
Bash
systemctl --failed
systemctl list-units --state=failed
ğŸ“Š 10ï¸âƒ£ Diagnostic post-mortem rapide (script N3)
Copy code
Bash
echo "=== LAST BOOTS ==="; last -x | head
echo "=== KERNEL ERRORS ==="; journalctl -k -b -1 | tail -50
echo "=== OOM ==="; grep -i oom /var/log/messages
echo "=== WATCHDOG ==="; grep -i watchdog /var/log/messages
echo "=== TAINT ==="; cat /proc/sys/kernel/tainted
ğŸ§¾ Conclusion N3 (exemple)
Root Cause : Reboot non planifiÃ© causÃ© par un soft lockup CPU dÃ©tectÃ© par le watchdog matÃ©riel, dÃ©clenchÃ© par une saturation I/O disque combinÃ©e Ã  un module tiers non certifiÃ© sur kernel RHEL 7.
Corrective Action : Upgrade kernel + module, ajustement watchdog.
Preventive : Monitoring I/O + validation modules aprÃ¨s patch.
ğŸ‘‰ Si tu veux, envoie-moi :
un /var/log/messages
un journalctl -b -1
ou dis-moi VM ou physique
Je te ferai la RCA finale prÃªte incident manager / client âœ…

OK â€” avec uniquement la date/heure 06 janvier 2026 Ã  09:37 je ne peux pas â€œdevinerâ€ la root cause (il faut une preuve dans les logs). Par contre je peux te donner la procÃ©dure exacte pour lâ€™identifier Ã  100% et sortir une RCA propre.
HypothÃ¨se : serveur en Europe/Paris (CET). Si lâ€™horodatage est en UTC sur certains logs, on le verra.
1) Confirmer lâ€™Ã©vÃ©nement reboot autour de 09:37
Copy code
Bash
last -x | egrep -i "reboot|shutdown" | head -30
who -b
uptime
Ce que tu cherques :
une ligne reboot   system boot  ... proche de Tue Jan  6 09:37
ou shutdown juste avant.
2) Extraire les logs exactement autour de 09:37 (fenÃªtre 10 min)
Si systemd/journald dispo (RHEL7 oui)
Copy code
Bash
journalctl --since "2026-01-06 09:25:00" --until "2026-01-06 09:50:00" --no-pager
Kernel uniquement (souvent la root cause est lÃ )
Copy code
Bash
journalctl -k --since "2026-01-06 09:25:00" --until "2026-01-06 09:50:00" --no-pager
Logs classiques RHEL7
Copy code
Bash
sed -n '/Jan  6 09:2[5-9]/,/Jan  6 09:5[0-9]/p' /var/log/messages
3) Chercher les â€œsignaturesâ€ root cause (patterns)
Lance ces commandes sur la mÃªme fenÃªtre horaire :
A) Kernel panic / oops / lockup
Copy code
Bash
egrep -i "panic|Oops|BUG:|soft lockup|hard lockup|NMI|Call Trace" /var/log/messages
B) OOM killer (mÃ©moire)
Copy code
Bash
egrep -i "Out of memory|oom-killer|Killed process" /var/log/messages
C) Watchdog (matÃ©riel / softdog)
Copy code
Bash
egrep -i "watchdog|softdog|hardlockup" /var/log/messages
D) Storage / filesystem (I/O error => panic parfois)
Copy code
Bash
egrep -i "I/O error|blk_update_request|Buffer I/O|xfs|ext4|reset|nvme|sd .* error" /var/log/messages
E) Power / ACPI / reset externe (souvent â€œaucun logâ€ avant reboot)
Copy code
Bash
egrep -i "Power|ACPI|reset|Machine check|mce|thermal" /var/log/messages
F) Reboot demandÃ© par quelquâ€™un / automation
Copy code
Bash
egrep -i "shutdown|reboot|systemd-logind|Runlevel|init 6" /var/log/messages
4) VÃ©rifier si câ€™est un CRASH kernel (kdump)
Si kdump est actif, tu peux avoir la preuve dÃ©finitive :
Copy code
Bash
systemctl status kdump
ls -ltr /var/crash/
Sâ€™il existe un rÃ©pertoire datÃ© du 2026-01-06, câ€™est trÃ¨s probablement kernel panic / crash.
5) Indices perf juste avant 09:37 (si sysstat installÃ©)
Copy code
Bash
sar -q -f /var/log/sa/sa06 | sed -n '1,200p'
sar -u -f /var/log/sa/sa06 | sed -n '1,200p'
sar -r -f /var/log/sa/sa06 | sed -n '1,200p'
sar -d -f /var/log/sa/sa06 | sed -n '1,200p'
ğŸ‘‰ Cherche un pic Ã  09:30â€“09:37 :
load Ã©norme (CPU lockup)
mÃ©moire qui tombe Ã  0 (OOM)
iowait trÃ¨s haut (storage freeze â†’ watchdog)
6) Comment conclure la root cause (rÃ¨gle simple)
Tu as un â€œpanic/oops/call traceâ€ â†’ root cause = kernel crash (souvent module/driver).
Tu as â€œOut of memory / Killed processâ€ â†’ root cause = OOM / fuite mÃ©moire / sizing.
Tu as â€œwatchdog: hard/soft lockupâ€ â†’ root cause = CPU hang (souvent I/O ou bug kernel).
Tu nâ€™as rien dans les logs OS juste avant â†’ root cause = externe (hyperviseur, iDRAC, perte dâ€™alim).
Ce dont jâ€™ai besoin pour te donner la root cause exacte
Colle ici (mÃªme tronquÃ©) :
sortie de :
Copy code
Bash
journalctl -k --since "2026-01-06 09:25" --until "2026-01-06 09:50" --no-pager | tail -200
et :
Copy code
Bash
sed -n '/Jan  6 09:3[0-9]/,/Jan  6 09:4[0-9]/p' /var/log/messages
Avec Ã§a, je te rÃ©dige la RCA finale (Root Cause + Evidence + Corrective/Preventive actions) sur lâ€™incident de 06/01/2026 09:37.