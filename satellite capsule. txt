Parfait ğŸ‘
Je te propose une rÃ©ponse structurÃ©e, claire et â€œarchitecture-readyâ€, que tu peux envoyer telle quelle par mail (ou adapter lÃ©gÃ¨rement selon le ton interne).
Je me base explicitement sur ton contexte rÃ©el : Katello en pull, patch light + kernel, frÃ©quences mensuelles, liste serveurs fournie par ProdSec, Satellite CIS.
ğŸ’¡ Logique retenue
Pas de promesse non tenue (pas de push â€œmagiqueâ€)
AlignÃ© Red Hat Satellite 6.x best practices
Lisible pour sÃ©cu / archi / management
SÃ©paration claire Satellite CIS / Prod
ğŸ“§ RÃ©ponse proposÃ©e (mail)
Email
Subject
RE: Satellite CIS â€“ RÃ©ponses aux questions dâ€™architecture
Bonjour,
Merci pour le partage de la liste de questions.
Voici nos Ã©lÃ©ments de rÃ©ponse basÃ©s sur lâ€™architecture Satellite C actuelle et les usages en production.
1/ CIDT â€“ ConfidentialitÃ© / IntÃ©gritÃ© / DisponibilitÃ© / TraÃ§abilitÃ©
AP84354 (Production)
C = Internal
I = Standard
D = Strong
T = Minimal
A101645 (Satellite CIS)
C = Internal
I = Standard
D = Minimum
T = Minimal
Ces niveaux sont cohÃ©rents avec lâ€™usage Satellite CI (gestion de patchs et de contenus), sous rÃ©serve de validation finale via la fiche ASC (dÃ©cembre).
2/ Mode de fonctionnement : Pull / Push
Dans la configuration actuelle bp / Satellite CI :
âœ… Mode Pull uniquement
Les clients sâ€™enregistrent via Katello
Check-in pÃ©riodique via dnf/yum
TÃ©lÃ©chargement et application des errata lors des fenÃªtres planifiÃ©es
âŒ Pas de push direct vers les serveurs
Satellite orchestre, mais ne pousse pas de commandes arbitraires
Les correctifs sont appliquÃ©s lors des exÃ©cutions planifiÃ©es cÃ´tÃ© client
Les campagnes de patching sont organisÃ©es :
Patch light (hors kernel)
Patch kernel
FrÃ©quence mensuelle
PÃ©rimÃ¨tre dÃ©fini par ProdSe (liste serveurs)
3/ Port 9090 â€“ Foreman Smart Proxy
Le port 9090/TCP est requis pour :
Communications Satellite â†” Capsules (Foreman Smart Proxy)
HTTPS uniquement
âŒ Pas de clÃ© SSH nÃ©cessaire
Le modÃ¨le ne repose pas sur SSH mais sur HTTPS + certificats
âŒ Pas de remote execution active
Katello Agent Ã©tant dÃ©prÃ©ciÃ©
La Remote Execution (SSH / Ansible) nâ€™est pas utilisÃ©e dans ce contexte CIS
âŒ Pas de gestion de configuration
Satellite CIS est utilisÃ© uniquement pour :
Contenus
Errata
Patching
La configuration (Ansible, scripts, etc.) est hors pÃ©rimÃ¨tre
4/ AccÃ¨s Ã©quipes Linux N3 / N2 (Roumanie)
AccÃ¨s via authentification locale Satellite
Comptes nominatifs
Pas dâ€™accÃ¨s gÃ©nÃ©rique
Droits limitÃ©s par rÃ´les
5/ RÃ´les sur lâ€™interface WEB
Les rÃ´les suivants sont utilisÃ©s :
Administrateur Satellite
Administrateur dâ€™organisation
Viewer (read-only)
Principe du least privilege appliquÃ©.
6/ Hammer CLI
Hammer utilise :
La mÃªme authentification
Les mÃªmes rÃ´les et permissions que lâ€™interface Web
Aucun contournement des contrÃ´les RBAC
7/ Compte admin local Ã  lâ€™installation
Un compte admin local existe Ã  lâ€™installation
Il est :
Soit dÃ©sactivÃ©
Soit strictement restreint
Les accÃ¨s quotidiens passent par des comptes nominatifs
8/ Organisations Satellite
Les organisations sont positionnÃ©es selon :
Environnement (CIS / PROD)
SÃ©paration fonctionnelle
Le nombre dâ€™organisations est volontairement limitÃ© pour Ã©viter la complexitÃ© inutile
9/ API REST Satellite
Lâ€™API REST est utilisÃ©e pour :
Automatisation
IntÃ©grations internes
Authentification :
Comptes techniques
Tokens
RBAC identique Ã  lâ€™interface Web
10/ DisponibilitÃ© / Haute DisponibilitÃ©
Les Capsules sont en HA
Les serveurs consomment les donnÃ©es via les capsules
Le Satellite central (dÃ©pÃ´t) :
Nâ€™est pas en HA active/active
Un plan de bascule existe en cas dâ€™incident majeur
Cette affirmation est correcte.
Cordialement,
[Ton Nom]
ğŸ§  Si tu veux aller plus loin
Je peux aussi te fournir :
une version â€œpitch archi / sÃ©cuâ€ (1 page)
un schÃ©ma dâ€™architecture Satellite CIS
une checklist conformitÃ© sÃ©cu Satellite
une version ultra-courte pour comitÃ© de validation

OK â€” voici une rÃ©ponse trÃ¨s dÃ©taillÃ©e, question par question, avec le niveau â€œarchi + sÃ©cu + opsâ€.
(Je reste alignÃ© avec ton contexte : enregistrement Katello en PULL, patch light + patch kernel, cadence mensuelle, pÃ©rimÃ¨tre fourni par ProdSec.)
1/ CIDT (ConfidentialitÃ© / IntÃ©gritÃ© / DisponibilitÃ© / TraÃ§abilitÃ©)
Objectif
Qualifier le niveau de criticitÃ© des donnÃ©es et des services Satellite CIS (et Prod), pour cadrer :
les exigences sÃ©curitÃ© (chiffrement, contrÃ´le dâ€™accÃ¨s, logs),
la disponibilitÃ© attendue,
lâ€™auditabilitÃ©/traÃ§abilitÃ©.
Ce que traite Satellite CIS
Satellite (CIS) manipule principalement :
inventaire technique (hostname, IP, facts, OS, packages installÃ©s),
donnÃ©es de patching (errata, historique dâ€™application, statut),
certificats (certs RHSM/Katello, certs inter-composants Satellite/Capsule),
clÃ©s / tokens / credentials (API tokens, Ã©ventuellement comptes techniques),
contenus logiciels (RPM/repodata â€“ gÃ©nÃ©ralement non sensibles mais critiques en intÃ©gritÃ©).
Proposition de cadrage (logique)
ConfidentialitÃ© (C) : Internal
Car lâ€™inventaire + Ã©tats patchs + noms serveurs peuvent Ãªtre sensibles (cartographie SI).
IntÃ©gritÃ© (I) : Standard (voire Strong si exigence sÃ©cu Ã©levÃ©e)
Lâ€™intÃ©gritÃ© est critique : si un repo/errata est altÃ©rÃ© â†’ risque supply-chain interne.
DisponibilitÃ© (D) : dÃ©pend de lâ€™exploitation
Strong si Satellite est un composant indispensable au patching et au run (grandes vagues)
Minimum/Standard si un arrÃªt est tolÃ©rable et quâ€™on peut dÃ©caler les runs
TraÃ§abilitÃ© (T) : Minimal Ã  Standard selon audit
Minimal si on garde logs dâ€™accÃ¨s + changements majeurs.
Standard si audit imposÃ© (qui a dÃ©clenchÃ© quoi, quand, sur quel scope, etc.).
Ce que je mettrais dans la rÃ©ponse
PROD (AP84354) : C=Internal / I=Standard / D=Strong / T=Minimal Ã  Standard
Justif : disponibilitÃ© importante lors des fenÃªtres de patch, impact large si indispo.
Satellite CIS (A101645) : C=Internal / I=Standard / D=Minimum Ã  Standard / T=Minimal
Justif : CIS sert Ã  patcher un pÃ©rimÃ¨tre dÃ©fini. Lâ€™indispo peut Ãªtre compensÃ©e par dÃ©calage.
Points Ã  mentionner (trÃ¨s â€œsÃ©cu-friendlyâ€)
Chiffrement TLS partout (UI/API, Satelliteâ†”Capsules, Clientsâ†”Capsules/Satellite)
RBAC strict + comptes nominatifs
Journaux (Foreman, httpd, auditd, PostgreSQL si demandÃ©)
Hash/GPG des RPM (contenu signÃ© Red Hat) et contrÃ´le du chemin de confiance
2/ â€œPull onlyâ€ vs â€œPush autorisÃ© ?â€ (configuration bp2i)
DÃ©finition claire
PULL : le client vient chercher (check-in, mÃ©tadonnÃ©es, RPM, errata)
Ex : dnf update/yum update, timers systemd, cron, jobs dâ€™outil interne.
PUSH : le serveur central dÃ©clenche une action sur le client
Ex : Remote Execution (SSH/Ansible), agent, ou orchestration active.
Dans ton modÃ¨le (Katello PULL)
Vous Ãªtes dans un modÃ¨le PULL contrÃ´lÃ©, ce qui est trÃ¨s courant en environnements sÃ©curisÃ©s :
Les machines sont enregistrÃ©es (subscription-manager/Katello)
Elles rÃ©cupÃ¨rent les repos via Satellite/Capsule
Lâ€™application des patchs est faite via vos jobs/automation (AAP / scripts / ordonnanceur)
ProdSec fournit la liste des serveurs â†’ vous ciblez des groupes (hostgroups, AK, collections, ou inventaires dâ€™automatisation)
Ce que Satellite apporte mÃªme en â€œPULLâ€
MÃªme si câ€™est du pull, Satellite apporte :
gouvernance du contenu : CV/CCV, lifecycle environments, filtres errata
cadrage du patch : â€œce serveur voit tel set de reposâ€, â€œtel snapshot de contenuâ€
visibilitÃ© : quels hÃ´tes sont en retard, quels errata manquent, historique
conformitÃ© : prouver ce qui a Ã©tÃ© proposÃ© et ce qui a Ã©tÃ© appliquÃ©
â€œPushâ€ : ce que Ã§a voudrait dire concrÃ¨tement (et pourquoi vous ne le faites pas)
Remote Execution (SSH) ou Ansible via Satellite
Cela impose :
ouverture rÃ©seau SSH / gestion clÃ©s,
gestion des credentials,
risques dâ€™exÃ©cution non dÃ©sirÃ©e depuis un composant central.
Dans un contexte CIS, on dit gÃ©nÃ©ralement : âœ… â€œSatellite = contenu + conformitÃ©â€
âœ… â€œOrchestration patch = outillage interne (AAP/ordonnanceur)â€
âŒ â€œSatellite ne pousse pas de patch directementâ€
3/ Port 9090 â€“ Foreman Smart Proxy + questions associÃ©es
Ã€ quoi sert le Smart Proxy (Capsule)
Le Smart Proxy (Capsule) est le composant â€œedgeâ€ qui :
expose des services (contenu, facts, templates, etc. selon modules activÃ©s)
relaye/assure des fonctions au plus prÃ¨s des clients
permet la scalabilitÃ© (Ã©viter que tout tape le Satellite central)
Sur le port 9090
9090/TCP est utilisÃ© historiquement/typiquement pour les communications du Smart Proxy (selon versions/modules) en HTTPS.
Selon la topologie, lâ€™essentiel est : Satellite â†” Capsule doit passer en TLS et Ãªtre autorisÃ© via firewall.
ğŸ‘‰ En pratique, la bonne rÃ©ponse â€œarchiâ€ Ã  Ã©crire :
â€œLes communications Satellite/Capsule et services Smart Proxy nÃ©cessitent lâ€™ouverture des ports requis en TCP/HTTPS entre zones (Satellite Core, Capsules, systÃ¨mes gÃ©rÃ©s). Le port 9090 est utilisÃ© pour Smart Proxy dans notre design.â€
ClÃ© SSH pour foreman-proxy ?
Non, le fonctionnement standard Smart Proxy ne nÃ©cessite pas SSH.
Les Ã©changes sont :
certifiÃ©s (certificats gÃ©nÃ©rÃ©s/dÃ©ployÃ©s lors de lâ€™installation capsule)
authentifiÃ©s via TLS mutualisÃ© selon composants.
Remote Execution possible ?
Possible techniquement, mais hors pÃ©rimÃ¨tre chez vous.
Remote Execution = dÃ©clencher du code sur les clients depuis Satellite (SSH ou Ansible).
Vous avez prÃ©cisÃ© : patching mensuel via vos processus + Katello pull â†’ donc pas de besoin dâ€™ouvrir SSH et pas de besoin dâ€™agent (Katello-agent dÃ©prÃ©ciÃ©).
Est-ce utilisÃ© pour gestion de configuration (scripts Ansibleâ€¦) ?
Dans votre modÃ¨le : non.
Vous sÃ©parez :
Gestion de contenu/errata (Satellite)
Orchestration/apply (AAP / scripts / ordonnanceur interne)
4/ AccÃ¨s Ã©quipes Linux N3 + N2 (Roumanie) : authent locale ?
Ce quâ€™on doit Ã©crire (et ce que Ã§a implique)
Oui, accÃ¨s possible via :
comptes locaux (crÃ©Ã©s dans Satellite) ou intÃ©gration IAM/SSO (LDAP/OIDC) si prÃ©vu.
Comme tu as mentionnÃ© â€œauthentification locale (comptes locaux)â€ :
Comptes nominatifs (pas de â€œshared adminâ€)
Mot de passe conforme politique (complexitÃ©, rotation si demandÃ©e)
RBAC strict (rÃ´les par Ã©quipe)
Journalisation des connexions et actions
Bon argument sÃ©cu
Local accounts = simple et autonome
Mais en entreprise, on prÃ©fÃ¨re souvent :
SSO/LDAP/OIDC
dÃ©sactivation automatique quand un compte quitte lâ€™entreprise Si vous restez en local : prÃ©ciser le process dâ€™onboarding/offboarding.
5/ RÃ´les interface WEB : Admin / Viewer / Admin orga ?
RBAC Satellite (principe)
Satellite/Foreman gÃ¨re des rÃ´les composÃ©s de permissions.
On peut :
utiliser des rÃ´les standards,
ou crÃ©er un rÃ´le â€œBP2I Viewerâ€, â€œBP2I Patch Operatorâ€, etc.
Proposition trÃ¨s claire (par profil)
Satellite Admin (plateforme) :
Gestion globale (Capsules, settings, sync, infra, users/roles, etc.)
Org Admin (fonctionnel) :
GÃ¨re lâ€™organisation : AK, CV/CCV, lifecycle, hosts de lâ€™orga
Viewer (read-only) :
Consultation inventaire, errata status, dashboards
Bonus â€œpatchingâ€ (souvent utile)
CrÃ©er un rÃ´le intermÃ©diaire :
Patch Operator :
consulter conformitÃ©,
dÃ©clencher publication/promotion si autorisÃ©,
sans toucher Ã  lâ€™infra, ni aux users.
6/ Hammer CLI : mÃªme auth et mÃªmes rÃ´les ?
RÃ©ponse dÃ©taillÃ©e
Oui :
Hammer est un client CLI qui appelle lâ€™API Satellite (Foreman/Katello).
Lâ€™API applique les mÃªmes contrÃ´les RBAC que lâ€™UI web.
Authentification possible via :
login/password (compte local)
ou tokens (plus propre pour automation)
Toute action Hammer est auditÃ©e comme une action API (avec lâ€™utilisateur associÃ©).
Conclusion Ã  Ã©crire :
â€œHammer utilise la mÃªme authentification/autorisation que lâ€™interface Web. Les permissions RBAC sâ€™appliquent identiquement.â€
7/ Compte admin local Ã  lâ€™installation : actif ? utilisable ?
RÃ©alitÃ© terrain
Ã€ lâ€™installation, on crÃ©e gÃ©nÃ©ralement un compte admin initial.
Bonne posture sÃ©cu Ã  dÃ©crire
Le compte initial sert :
Ã  bootstrapper lâ€™instance (config initiale)
Ensuite :
on utilise des comptes nominatifs
on limite lâ€™usage du compte initial (voire dÃ©sactivation/rotation mot de passe)
on stocke les secrets dans un coffre (si existant)
Formulation â€œpropreâ€ :
â€œUn compte admin initial existe pour lâ€™initialisation. Lâ€™exploitation courante se fait via comptes nominatifs. Le compte initial est restreint et son usage contrÃ´lÃ©.â€
8/ Organisations Satellite : positionnement, combien dâ€™orgas ?
RÃ´le dâ€™une organisation
Une organisation sÃ©pare :
contenu (produits/repos/CV/AK),
hÃ´tes,
permissions et visibilitÃ©.
StratÃ©gie recommandÃ©e (et compatible avec ton contexte)
Ne pas multiplier les organisations inutilement (complexitÃ© opÃ©rationnelle)
CrÃ©er des orgs quand :
sÃ©paration forte (prod vs cis), ou entitÃ© distincte
contraintes de gouvernance diffÃ©rentes
RÃ©ponse possible (sans inventer)
â€œSatellite CIS comporte N organisations alignÃ©es avec la segmentation et la gouvernance (environnements/entitÃ©s).â€
â€œOn vise un nombre minimal dâ€™orgas pour limiter la dette opÃ©rationnelle.â€
Si tu veux un exemple concret Ã  donner :
1 org â€œCISâ€
OU 1 org par grand domaine si rÃ©ellement nÃ©cessaire (ex : CIS-Infra / CIS-App)
9/ API REST Satellite : cas dâ€™usage + authentification
Cas dâ€™usage typiques (dans votre modÃ¨le)
Automatiser :
crÃ©ation/gestion hostgroups
rattachement AK
consultation conformitÃ© errata
gÃ©nÃ©ration rapports
actions de publication/promotion (si autorisÃ©es)
IntÃ©grations internes :
CMDB
AAP / pipelines GitLab
reporting sÃ©curitÃ© (ProdSec)
Authentification recommandÃ©e
Comptes techniques dÃ©diÃ©s
API tokens (plutÃ´t que mdp en clair)
RBAC minimal (permissions strictement nÃ©cessaires)
Rotation des tokens / stockage dans vault (si possible)
Formulation :
â€œLâ€™API REST est utilisÃ©e pour automatisation et intÃ©gration. Authentification via comptes techniques et tokens, soumis aux mÃªmes contrÃ´les RBAC que lâ€™UI.â€
10/ DisponibilitÃ© : Capsules en HA, Satellite dÃ©pÃ´t non-HA ?
Clarifier â€œHAâ€ selon composants
Capsules : oui, on peut mettre plusieurs capsules derriÃ¨re VIP / load balancer, ou par site, etc.
Les clients consomment via capsule â†’ rÃ©silience locale.
Satellite central :
Le â€œvrai HAâ€ actif/actif est complexe (DB, pulp, etc.)
En pratique on fait souvent :
sauvegardes + DR
restauration / bascule (cold/warm standby)
rÃ©plication des donnÃ©es si architecture le permet
Ce que tu peux rÃ©pondre clairement
â€œLes systÃ¨mes consomment via des capsules en HA.â€
â€œLe Satellite central nâ€™est pas en HA active/active ; une stratÃ©gie de bascule/DR est dÃ©finie.â€
TrÃ¨s important Ã  ajouter (niveau archi)
SPOF rÃ©siduel = base de donnÃ©es / stockage pulp / service central
Mesures compensatoires :
sauvegardes rÃ©guliÃ¨res testÃ©es
runbook de restauration
monitoring
capacitÃ© Ã  dÃ©caler les vagues de patch en cas dâ€™incident
Option : version â€œcopier-coller mailâ€
Si tu veux, je te fournis aussi la version mail complÃ¨te (avec intro/conclusion + ton pro), en 1 seul bloc prÃªt Ã  envoyer.
Dis-moi juste : tu veux un ton trÃ¨s formel (comitÃ© archi) ou tech + direct (Ã©change interne entre ops) ?

